<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="external_layout_background_payment">
        <div class="header">
            <div>ESTE DOCUMENTO ES UNA REPRESENTACION IMPRESA DE UN CFDI:</div>
            <div>EMISOR:<span t-field="o.company_id.name"/></div>
        </div>
        <div class="article">
            <t t-raw="0" />
        </div>

        <div class="footer">
            <div class="text-center">
                <ul class="list-inline">
                    <li t-if="company.phone"><i class="fa fa-phone"/> <span t-field="company.phone"/></li>
                    <li t-if="company.email"><i class="fa fa-at"/> <span t-field="company.email"/></li>
                    <li t-if="company.website"><i class="fa fa-globe"/> <span t-field="company.website"/></li>
                    <li t-if="company.vat"><i class="fa fa-building-o"/><t t-esc="company.country_id.vat_label or 'TIN'"/>: <span t-field="company.vat"/></li>
                </ul>
                <div t-field="company.report_footer"/>
                <div class="text-muted">
                    Page:
                    <span class="page"/>
                    of
                    <span class="topage"/>
                </div>
            </div>
        </div>
    </template>

    <template id="external_layout_payment">
        <!-- Multicompany -->
        <t t-if="not o and doc">
            <t t-set="o" t-value="doc"/>
        </t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id.sudo()"/>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"/>
        </t>
        <t t-call="l10n_mx_payment_cfdi.external_layout_background_payment"><t t-raw="0"/></t>
    </template>

        <template id="report_payment_document">
            <t t-call="l10n_mx_payment_cfdi.external_layout_payment">
                <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="row">
                        <hr width="100%" size="1"/>
                    </div>
                </div>
            </t>
        </template>

        <template id="report_payments">
            <t t-call="web.html_container">    
                <t t-foreach="docs" t-as="o">
                    <t t-call="l10n_mx_payment_cfdi.report_payment_document" t-lang="o.partner_id.lang" />
                </t>
            </t>
        </template>


</odoo>
